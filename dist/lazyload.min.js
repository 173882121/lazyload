var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";var a={elements_selector:"img",container:document,threshold:300,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",callback_load:null,callback_error:null,callback_set:null,callback_processed:null,observer_fallback:1},b=(!("onscroll"in window)||/glebot/.test(navigator.userAgent),function(a,b){a&&a(b)}),c=function(a,b,c,d){a[b+"EventListener"]("load",c),a[b+"EventListener"]("error",d)},d=function(a,b){a.classList.add(b)},e=function(a,b){a.classList.remove(b)},f=function(a,b){var c=new a(b),d=new CustomEvent("LazyLoad::Initialized",{detail:{instance:c}});window.dispatchEvent(d)},g=function(a,b){var c=b.dataSrcSet,d=a.parentElement;if("PICTURE"===d.tagName)for(var e=0;e<d.children.length;e++){var f=d.children[e];if("SOURCE"===f.tagName){var g=f.dataset[c];g&&f.setAttribute("srcset",g)}}},h=function(a,b){var c=b.data_src,d=b.data_srcset,e=a.tagName,f=a.dataset[c];if("IMG"===e){g(a,b);var h=a.dataset[d];return h&&a.setAttribute("srcset",h),void(f&&a.setAttribute("src",f))}if("IFRAME"===e)return void(f&&a.setAttribute("src",f));f&&(a.style.backgroundImage='url("'+f+'")')},i=function(b){var c=this;this._settings=_extends({},a,b),this._intObsSupport="IntersectionObserver"in window;var d=this._settings;if(this._intObsSupport){var e=function(a){a.forEach(function(a){if(a.intersectionRatio>0){var b=a.target;c._revealElement(b),c._observer.unobserve(b)}})};this._observer=new IntersectionObserver(e,{root:d.container===document?null:d.container,rootMargin:this._settings.threshold+"px"})}this.update()};i.prototype={_onError:function(a){var f=this._settings;if(f){var g=a.target;c(g,"remove",this._onLoad,this._onError),e(g,f.class_loading),d(g,f.class_error),b(f.callback_error,g)}},_onLoad:function(a){var f=this._settings;if(f){var g=a.target;c(g,"remove",this._onLoad,this._onError),e(g,f.class_loading),d(g,f.class_loaded),b(f.callback_load,g)}},_revealElement:function(a){var e=this._settings;["IMG","IFRAME"].indexOf(a.tagName)>-1&&(c(a,"add",this._onLoad.bind(this),this._onError.bind(this)),d(a,e.class_loading)),h(a,e),a.dataset.wasProcessed=!0,b(e.callback_set,a)},_purgeElements:function(){for(var a=this._elements,b=a.length,c=[],d=0;d<b;d++){a[d].dataset.wasProcessed&&c.push(d)}for(;c.length>0;)a.splice(c.pop(),1)},update:function(){var a=this,b=this._settings;if(this._elements=Array.prototype.slice.call(b.container.querySelectorAll(b.elements_selector)),this._purgeElements(),this._observer)return void this._elements.forEach(function(b){a._observer.observe(b)});1===b.observer_fallback&&this._elements.forEach(function(c){a._revealElement(c,b)})},destroy:function(){var a=this;this._observer&&(this._purgeElements(),this._elements.forEach(function(b){a._observer.unobserve(b)}),this._observer=null),this._elements=null,this._settings=null,this._intObsSupport=null}};var j=window.lazyLoadOptions;return j&&function(a,b){var c=b.length;if(c)for(var d=0;d<c;d++)f(a,b[d]);else f(a,b)}(i,j),i});
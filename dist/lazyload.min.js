var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";var a={elements_selector:"img",container:document,threshold:300,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",callback_load:null,callback_error:null,callback_set:null,callback_processed:null},b=function(a){return a.filter(function(a){return!a.dataset.wasProcessed})},c=function(a,b){var c=new a(b),d=new CustomEvent("LazyLoad::Initialized",{detail:{instance:c}});window.dispatchEvent(d)},d=function(a,b){var c=b.dataSrcSet,d=a.parentElement;if("PICTURE"===d.tagName)for(var e=0;e<d.children.length;e++){var f=d.children[e];if("SOURCE"===f.tagName){var g=f.dataset[c];g&&f.setAttribute("srcset",g)}}},e=function(a,b){var c=b.data_src,e=b.data_srcset,f=a.tagName,g=a.dataset[c];if("IMG"===f){d(a,b);var h=a.dataset[e];return h&&a.setAttribute("srcset",h),void(g&&a.setAttribute("src",g))}if("IFRAME"===f)return void(g&&a.setAttribute("src",g));g&&(a.style.backgroundImage='url("'+g+'")')},f=function(a,b){a&&a(b)},g=function(a,b,c){a.removeEventListener("load",b),a.removeEventListener("error",c)},h=function(a,b){var c=function c(e){i(e,!0,b),g(a,c,d)},d=function d(e){i(e,!1,b),g(a,c,d)};a.addEventListener("load",c),a.addEventListener("error",d)},i=function(a,b,c){var d=a.target;d.classList.remove(c.class_loading),d.classList.add(b?c.class_loaded:c.class_error),f(b?c.callback_load:c.callback_error,d)},j=function(a,b){["IMG","IFRAME"].indexOf(a.tagName)>-1&&(h(a,b),a.classList.add(b.class_loading)),e(a,b),a.dataset.wasProcessed=!0,f(b.callback_set,a)},k=function(b){this._settings=_extends({},a,b),this._setObserver(),this.update()};k.prototype={_setObserver:function(){var a=this;if("IntersectionObserver"in window){var c=this._settings,d=function(d){d.forEach(function(b){if(b.isIntersecting){var d=b.target;j(d,c),a._observer.unobserve(d)}}),a._elements=b(a._elements)};this._observer=new IntersectionObserver(d,{root:c.container===document?null:c.container,rootMargin:c.threshold+"px"})}},update:function(){var a=this,c=this._settings,d=c.container.querySelectorAll(c.elements_selector);if(this._elements=b(Array.prototype.slice.call(d)),this._observer)return void this._elements.forEach(function(b){a._observer.observe(b)});this._elements.forEach(function(a){j(a,c)}),this._elements=b(this._elements)},destroy:function(){var a=this;this._observer&&(b(this._elements).forEach(function(b){a._observer.unobserve(b)}),this._observer=null),this._elements=null,this._settings=null}};var l=window.lazyLoadOptions;return l&&function(a,b){var d=b.length;if(d)for(var e=0;e<d;e++)c(a,b[e]);else c(a,b)}(k,l),k});
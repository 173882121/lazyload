var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";var a={elements_selector:"img",container:document,threshold:300,data_src:"original",data_srcset:"originalSet",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",callback_load:null,callback_error:null,callback_set:null,callback_processed:null},b=function(a){return a.filter(function(a){return!a.dataset.wasProcessed})},c=function(a,b){var c=new a(b),d=new CustomEvent("LazyLoad::Initialized",{detail:{instance:c}});window.dispatchEvent(d)},d=function(a,b){var c=b.dataSrcSet,d=a.parentElement;if("PICTURE"===d.tagName)for(var e=0;e<d.children.length;e++){var f=d.children[e];if("SOURCE"===f.tagName){var g=f.dataset[c];g&&f.setAttribute("srcset",g)}}},e=function(a,b){var c=b.data_src,e=b.data_srcset,f=a.tagName,g=a.dataset[c];if("IMG"===f){d(a,b);var h=a.dataset[e];return h&&a.setAttribute("srcset",h),void(g&&a.setAttribute("src",g))}if("IFRAME"===f)return void(g&&a.setAttribute("src",g));g&&(a.style.backgroundImage='url("'+g+'")')},f=function(a,b){a&&a(b)},g=function(a,b,c,d){a[b+"EventListener"]("load",c),a[b+"EventListener"]("error",d)},h=function(a,b){a.classList.add(b)},i=function(a,b){a.classList.remove(b)},j=function a(b,c){if(c){var d=b.target;g(d,"remove",k,a),i(d,c.class_loading),h(d,c.class_error),f(c.callback_error,d)}},k=function a(b,c){if(c){var d=b.target;g(d,"remove",a,j),i(d,c.class_loading),h(d,c.class_loaded),f(c.callback_load,d)}},l=function(a,b){["IMG","IFRAME"].indexOf(a.tagName)>-1&&(g(a,"add",k,j),h(a,b.class_loading)),e(a,b),a.dataset.wasProcessed=!0,f(b.callback_set,a)},m=function(c){var d=this;this._settings=_extends({},a,c);var e=this._settings;if("IntersectionObserver"in window){var f=function(a){a.forEach(function(a){if(a.isIntersecting){var b=a.target;l(b,e),d._observer.unobserve(b)}}),d._elements=b(d._elements)};this._observer=new IntersectionObserver(f,{root:e.container===document?null:e.container,rootMargin:e.threshold+"px"})}this.update()};m.prototype={update:function(){var a=this,c=this._settings,d=c.container.querySelectorAll(c.elements_selector);if(this._elements=b(Array.prototype.slice.call(d)),this._observer)return void this._elements.forEach(function(b){a._observer.observe(b)});this._elements.forEach(function(a){l(a,c)}),this._elements=b(this._elements)},destroy:function(){var a=this;this._observer&&(b(this._elements).forEach(function(b){a._observer.unobserve(b)}),this._observer=null),this._elements=null,this._settings=null}};var n=window.lazyLoadOptions;return n&&function(a,b){var d=b.length;if(d)for(var e=0;e<d;e++)c(a,b[e]);else c(a,b)}(m,n),m});
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";var e={elements_selector:"img",container:document,threshold:300,data_src:"src",data_srcset:"srcset",class_loading:"loading",class_loaded:"loaded",class_error:"error",callback_load:null,callback_error:null,callback_set:null},t=function(e){return e.filter(function(e){return!e.dataset.wasProcessed})},r=function(e,t){var r=new e(t),n=new CustomEvent("LazyLoad::Initialized",{detail:{instance:r}});window.dispatchEvent(n)},n=function(e,t){var r=t.data_srcset,n=e.parentElement;if("PICTURE"===n.tagName)for(var s,o=0;s=n.children[o];o+=1)if("SOURCE"===s.tagName){var a=s.dataset[r];a&&s.setAttribute("srcset",a)}},s=function(e,t,r){var n=r.data_src,s=r.data_srcset,o=e.setSourcesForPicture,a=t.tagName,i=t.dataset[n];if("IMG"===a){o(t,r);var c=t.dataset[s];return c&&t.setAttribute("srcset",c),void(i&&t.setAttribute("src",i))}"IFRAME"!==a?i&&(t.style.backgroundImage='url("'+i+'")'):i&&t.setAttribute("src",i)},o=function(e,t){e&&e(t)},a=function(e,t,r){e.removeEventListener("load",t),e.removeEventListener("error",r)},i=function(e,t){var r=function r(s){c(s,!0,t),a(e,r,n)},n=function n(s){c(s,!1,t),a(e,r,n)};e.addEventListener("load",r),e.addEventListener("error",n)},c=function(e,t,r){var n=e.target;n.classList.remove(r.class_loading),n.classList.add(t?r.class_loaded:r.class_error),o(t?r.callback_load:r.callback_error,n)},l=function(e,t){["IMG","IFRAME"].indexOf(e.tagName)>-1&&(i(e,t),e.classList.add(t.class_loading)),s({setSourcesForPicture:n},e,t),e.dataset.wasProcessed=!0,o(t.callback_set,e)},u=function(t){this._settings=_extends({},e,t),this._setObserver(),this.update()};u.prototype={_setObserver:function(){var e=this;if("IntersectionObserver"in window){var r=this._settings;this._observer=new IntersectionObserver(function(n){n.forEach(function(t){if(t.isIntersecting){var n=t.target;l(n,r),e._observer.unobserve(n)}}),e._elements=t(e._elements)},{root:r.container===document?null:r.container,rootMargin:r.threshold+"px"})}},update:function(){var e=this,r=this._settings,n=r.container.querySelectorAll(r.elements_selector);this._elements=t(Array.prototype.slice.call(n)),this._observer?this._elements.forEach(function(t){e._observer.observe(t)}):(this._elements.forEach(function(e){l(e,r)}),this._elements=t(this._elements))},destroy:function(){var e=this;this._observer&&(t(this._elements).forEach(function(t){e._observer.unobserve(t)}),this._observer=null),this._elements=null,this._settings=null}};var d=window.lazyLoadOptions;return d&&function(e,t){if(t.length)for(var n,s=0;n=t[s];s+=1)r(e,n);else r(e,t)}(u,d),u});